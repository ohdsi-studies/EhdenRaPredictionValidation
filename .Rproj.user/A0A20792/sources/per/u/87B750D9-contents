library(EHDENRAPredictionValidation)

# add details of your database setting:
databaseName <- 'PanTher'

# add the cdm database schema with the data
cdmDatabaseSchema <- 'CDM_OPTUM_PANTHER_V1020.dbo'

# add the work database schema this requires read/write privileges 
cohortDatabaseSchema <- 'scratch.dbo'

# if using oracle please set the location of your temp schema
oracleTempSchema <- NULL

# the name of the table that will be created in cohortDatabaseSchema to hold the cohorts
cohortTable <- 'EHDENRAPredictionValidationCohortTablePanther'

# the location to save the prediction models results to:
outputFolder <- "D:/git/EhdenRaPrediction/EHDENRAPredictionResults/Validation/PanTher"

# add connection details:
options(fftempdir = "d:/temp2/ff")
connectionDetails <- createConnectionDetails(dbms ="pdw", server = "JRDUSAPSCTL01", port = "17001")


# Now run the study
EHDENRAPredictionValidation::execute(connectionDetails = connectionDetails,
                                     databaseName = databaseName,
                                     cdmDatabaseSchema = cdmDatabaseSchema,
                                     cohortDatabaseSchema = cohortDatabaseSchema,
                                     oracleTempSchema = oracleTempSchema,
                                     cohortTable = cohortTable,
                                     outputFolder = outputFolder,
                                     createCohorts = T,
                                     runValidation = T,
                                     packageResults = T,
                                     minCellCount = 5,
                                     sampleSize = NULL)
